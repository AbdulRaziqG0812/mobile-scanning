<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Invoice - {{ company.name }}</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, sans-serif;
    background: #f4f6f9;
    margin: 0;
    padding: 20px;
    color: #333;
  }

  .invoice-container {
    background: #fff;
    max-width: 800px;
    margin: auto;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.08);
    padding: 30px;
  }

  /* Header */
  .invoice-header {
    text-align: center;
    border-bottom: 3px solid #2F75C6;
    padding-bottom: 10px;
    margin-bottom: 25px;
  }

  .invoice-header h1 {
    color: #2F75C6;
    margin: 0;
    font-size: 26px;
    text-transform: uppercase;
  }

  .invoice-header p {
    margin: 3px 0;
    color: #555;
    font-size: 14px;
  }

  /* Info Section */
  .info-section {
    display: flex;
    justify-content: space-between;
    margin-bottom: 20px;
    flex-wrap: wrap;
  }

  .info-box {
    width: 48%;
    background: #f9fbff;
    border: 1px solid #d8e3f3;
    border-radius: 8px;
    padding: 10px 15px;
    box-sizing: border-box;
  }

  .info-box h3 {
    color: #2F75C6;
    font-size: 15px;
    margin-bottom: 10px;
    border-bottom: 1px solid #d8e3f3;
    padding-bottom: 4px;
  }

  .info-box p {
    margin: 3px 0;
    font-size: 13.5px;
  }

  /* Table */
  table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 25px;
  }

  th, td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: center;
    font-size: 13.5px;
  }

  th {
    background-color: #2F75C6;
    color: white;
    text-transform: uppercase;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  tr:nth-child(even) {
    background-color: #f9fbff;
  }

  /* Totals */
  .totals {
    width: 100%;
    text-align: right;
  }

  .totals td {
    font-weight: bold;
    font-size: 14px;
    padding: 6px 10px;
  }

  .totals .label {
    text-align: right;
    color: #2F75C6;
  }

  /* Terms & Thank You */
  .terms {
    margin-top: 40px;
    font-size: 13px;
    color: #444;
    border-top: 1px solid #d8e3f3;
    padding-top: 10px;
  }

  .terms h4 {
    color: #2F75C6;
    margin-bottom: 8px;
    font-size: 15px;
  }

  .thank-you {
    text-align: center;
    color: #2F75C6;
    font-size: 15px;
    font-weight: 600;
    margin-top: 25px;
    border-top: 2px dashed #d8e3f3;
    padding-top: 10px;
  }

  /* Signature */
  .signatures {
    display: flex;
    justify-content: flex-end;
    margin-top: 50px;
  }

  .signature-box {
    width: 40%;
    text-align: center;
    border-top: 2px solid #2F75C6;
    padding-top: 8px;
    font-size: 13.5px;
  }

  .signature-box span {
    color: #2F75C6;
    font-weight: bold;
  }

  /* Print Button */
  .print-btn {
    text-align: center;
    margin-top: 25px;
  }

  .print-btn button {
    background: #2F75C6;
    color: #fff;
    border: none;
    border-radius: 5px;
    padding: 10px 22px;
    font-size: 14px;
    cursor: pointer;
    transition: 0.3s ease;
  }

  .print-btn button:hover {
    background: #245d9e;
  }

  /* Print Styling */
  @media print {
    body {
      background: white;
      margin: 0;
    }

    .invoice-container {
      box-shadow: none;
      border: none;
      margin: 0;
      padding: 10px 25px;
    }

    .print-btn {
      display: none;
    }
  }
</style>

<script>
  function printInvoice() {
    window.print();
  }
</script>
</head>
<body>
  <div class="invoice-container">
    <!-- Header -->
    <div class="invoice-header">
      <h1>{{ company.name }}</h1>
      <p>{{ company.address }}</p>
      <p>📞 {{ company.phone }} | ✉️ {{ company.email }}</p>
    </div>

    <!-- Info Section -->
    <div class="info-section">
      <div class="info-box">
        <h3>Customer Details / تفاصيل الزبون</h3>
        <p><strong>Name / الاسم:</strong> {{ bill.customer_name }}</p>
        <p><strong>Mobile / الجوال:</strong> {{ bill.customer_mobile }}</p>
        <p><strong>Contact / التواصل:</strong> {{ bill.customer_contact }}</p>
        <p><strong>Address / العنوان:</strong> {{ bill.customer_address }}</p>
      </div>

      <div class="info-box">
        <h3>Invoice Info / معلومات الفاتورة</h3>
        <p><strong>Invoice No / رقم الفاتورة:</strong> {{ bill.bill_id }}</p>
        <p><strong>Date / التاريخ:</strong> {{ bill.bill_date }}</p>
      </div>
    </div>

    <!-- Product Table -->
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Model / الموديل</th>
          <th>IMEI / رقم IMEI</th>
          <th>Storage / السعة</th>
          <th>Color / اللون</th>
          <th>Price / السعر</th>
          <th>Qty / الكمية</th>
          <th>Amount / المجموع</th>
        </tr>
      </thead>
      <tbody>
        {% for item in items %}
        <tr>
          <td>{{ loop.index }}</td>
          <td>{{ item.product_model }}</td>
          <td>{{ item.product_imei }}</td>
          <td>{{ item.product_storage }}</td>
          <td>{{ item.product_color }}</td>
          <td>{{ "%.2f"|format(item.product_price) }}</td>
          <td>{{ item.qty }}</td>
          <td>{{ "%.2f"|format(item.amount) }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <!-- Totals -->
    <table class="totals">
      <tr>
        <td class="label">Subtotal / المجموع الفرعي:</td>
        <td>{{ "%.2f"|format(bill.subtotal) }}</td>
      </tr>
      <tr>
        <td class="label">Discount / الخصم:</td>
        <td>{{ "%.2f"|format(bill.discount) }}</td>
      </tr>
      <tr>
        <td class="label">Net Total / المجموع النهائي:</td>
        <td><strong>{{ "%.2f"|format(bill.net_total) }}</strong></td>
      </tr>
    </table>

    <!-- Terms -->
    <div class="terms">
      <h4>Terms & Conditions / الشروط والأحكام</h4>
      <p>{{ company.terms }}</p>
    </div>

    <!-- Thank You Message -->
    <div class="thank-you">
      ❤️ Thank you for your business! / شكراً لتعاملكم معنا
    </div>

    <!-- Signature -->
    <div class="signatures">
      <div class="signature-box">
        <span>Authorized Signature</span><br>التوقيع المعتمد
      </div>
    </div>

    <!-- Print Button -->
    <div class="print-btn">
      <button onclick="printInvoice()">🖨️ Print Invoice</button>
    </div>
  </div>
</body>
</html>
